
# Reconfigure key bindings
###########################

set -g prefix C-t
unbind C-b
# bind C-a send-prefix
# bind C-t send-prefix
bind C-t last-window
bind C-n next
bind C-p previous-window

unbind %
bind | split-window -h
bind - split-window -v


# Smart pane switching with awareness of vim splits
bind -n C-k run-shell 'tmux-vim-select-pane -U'
bind -n C-j run-shell 'tmux-vim-select-pane -D'
bind -n C-h run-shell 'tmux-vim-select-pane -L'
bind -n C-l run-shell 'tmux-vim-select-pane -R'
bind -n "C-\\" run-shell 'tmux-vim-select-pane -l'

# Bring back clear screen under tmux prefix
bind-key ^l send-keys C-l


bind-key R source-file ~/.tmux.conf \; display-message "source-file done"


bind-key ^r if-shell "test $(tmux display-message -p -F '#{window_panes}') -eq 1" 'join-pane -h -s:+1 ; select-layout main-vertical' 'break-pane -t+1 ; last-window'
bind-key  r if-shell "test $(tmux display-message -p -F '#{window_panes}') -eq 1" 'join-pane -v -s:+1 ; select-layout main-horizontal' 'break-pane -t+1 ; last-window'

# bind-key ^l if-shell "test $(tmux display-message -p -F '#{window_panes}') -eq 1" 'join-pane -h -s:-1 ; rotate-window ; last-pane ; select-layout main-vertical' 'rotate-window ; break-pane -t+1 ; last-window'
# bind-key  l if-shell "test $(tmux display-message -p -F '#{window_panes}') -eq 1" 'join-pane -v -s:-1 ; rotate-window ; last-pane ; select-layout main-horizontal' 'rotate-window ; break-pane -t+1 ; last-window'

# Settings
###########

# Reference: http://robots.thoughtbot.com/post/19398560514/how-to-copy-and-paste-with-tmux-on-mac-os-x
# you need to `brew install reattach-to-user-namespace`
set-option -g default-command "reattach-to-user-namespace -l bash"

set-window-option -g pane-base-index 1
set-window-option -g base-index 1

setw main-pane-height 12

# The status line is more like a shell
setw -g status-keys emacs
setw -g mode-keys vi

setw -g xterm-keys on
setw -g mode-mouse on

setw -g mouse-resize-pane on

setw -g mouse-select-pane on
setw -g mouse-select-window on
setw -g mouse-utf8 on
set-window-option -g utf8 on
set-option -g status-utf8 on


setw -g mode-keys vi

set -g set-titles on
set -g history-limit 10000

setw -g mode-bg colour240
# setw -g mode-bg colour088


# Status bar
#############

set -g default-terminal "screen-256color"
set display-time 1200

set status-interval 2

set status-bg colour235
set status-fg colour245

set message-fg colour232
set message-bg colour243


set-option -g pane-border-fg colour61
# set-option -g pane-border-bg black
set-option -g pane-active-border-fg colour61
# set-option -g pane-active-border-bg black


# set-window-option -g window-status-current-bg default
set-window-option -g window-status-current-fg colour3
set-window-option -g window-status-current-attr underscore

# BG color is specified here because guard-tmux sets the bgcolor, so
# we're just letting it set the last few characters there
set status-left '#[fg=colour232]#[bg=colour61] #S #[bg=default]#[fg=colour0] : '
set status-left-length 32

set status-right "#[fg=default] #T #[fg=default]#[fg=colour242]#(date '+%Y-%m-%d %H:%M')#[fg=default] #[bg=colour167,fg=colour232]#(~/Dropbox/dotfiles/bin/pomodoro time)#[bg=default,fg=default]"
set status-right-length 96

setw -g monitor-activity on
set -g visual-activity off
set -g visual-bell on

set -g status-bg default
set-window-option -g window-status-attr none

set-window-option status-left-bg black

# set-window-option -g window-status-activity-fg colour088
# set-window-option -g window-status-activity-bg colour235
set-window-option -g window-status-activity-fg colour251
set-window-option -g window-status-activity-bg colour235
set-window-option -g window-status-activity-attr none

set-window-option -g window-status-bg colour235
set-window-option -g window-status-fg colour245


